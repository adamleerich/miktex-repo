years      <- 2007:2016
inflation  <- 0.03
n_years    <- length(years)
inflation_factors <- (1 + inflation) ^ (-9:0)
inflation_factors
avg_severity <- inflation_factors * 95000
avg_severity
seq %>% head
require(devtools)
require(magrittr)
require(rmarkdown)
require(knitr)
require(alrtools)
require(BZLYUtil)
seq %>% head
sigma <- seq(from = 0.5, to = 5.0, by = 0.1)
sigma
mu <- log(95000) - sigma^2/2
mu
log(95000)
sqrt((log(95000) - 9.0) * 2)
sigma <- rep(2.2, 10)
mu <- log(avg_severity) - sigma^2/2
mu
sigma <- rep(2.2, 10)
mu <- log(avg_severity) - sigma^2/2
mu
n <- 10000
n <- 10e3
policies <- data.frame(index = 1:n)
str(policies)
n <- 10e3
policies <- data.frame(index = 1:n)
set.seed(912387)
policies$policy_number <- paste0(
'C1AE', right(paste0('00000000', sample(1:1e6, n)), 8))
policies$policy_year <- sample(
x = 2007:2016,
size = n,
prob = c(1, 2, 3, 4, 5, 5, 5, 5, 5, 5),
replace = TRUE)
policies$duration_months <- sample(
x = c(6:18),
size = n,
prob = c(2, 1, 1, 1, 1, 5, 100, 10, 5, 1, 1, 1, 20),
replace = TRUE)
policies$policy_month <- sample(1:12, n, replace = TRUE)
policies$inception <- paste0(
policies$policy_year, policies$policy_month)
policies$policy_month + policies$duration_months
policies$policy_month + policies$duration_months %>% table
(policies$policy_month + policies$duration_months) %>% table
a <- (policies$policy_month + policies$duration_months)
table(a)
a / 12
rounddown(a / 12, 0)
floor(a / 12)
table(b)
b <- floor(a / 12)
table(b)
policies$inception <- paste0(
policies$policy_year,
right(paste0('00', policies$policy_month), 2)
)
a <- (policies$policy_month + policies$duration_months)
table(a)
b <- floor(a / 12)
table(b)
policies$expiration <- paste0(
policies$policy_year + a,
right(paste0('00', policies$policy_month - 12*b), 2)
)
policies %>% copy.table
copy.table(policies, buffer.size = 5000)
copy.table(a)
copy.table(b)
policies$policy_month - 12*b
policies$expiration <- paste0(
policies$policy_year + b,
right(paste0('00', a - 12*b), 2)
)
copy.table(policies, buffer.size = 5000)
b <- floor((a - 1) / 12)
table(b)
policies$expiration <- paste0(
policies$policy_year + b,
right(paste0('00', a - 12*b), 2)
)
copy.table(policies, buffer.size = 5000)
head(polcies)
head(policies)
revenue_low   <- c(50e3, 100e3, 250e3, 500e3, 1e6, 2.5e6)
revenue_high  <- c(revenue_low[-1], 5e6)
revenue_low
revenue_high
policies$revenue_bucket <- sample(
x = 1:6,
size = n,
prob = c(6, 5, 4, 3, 2, 1),
replace = TRUE
)
hist(policies$revenue_bucket)
a <- runif(n)
a <- runif(n)
b <- policies$revenue_bucket
policies$revenue <- (revenue_high[b] - revenue_low[b]) * a +
revenue_low[b]
hist(policies$revenue)
copy.table(policies$revenue, buffer.size = 5000)
table(policies$revenue_bucket)
average(policies$revenue)
mean(policies$revenue)
packageDescription('ggplot2')
packageDescription('digest')
ls('package:digest')
require(ggplot2)
require(digest)
ls('package:digest')
require(grid)
ls('package:grid')
packageDescription('grid')
require(gtable)()
require(gtable)
ls('package:gtable')
packageDescription('gtable')
packageDescription('MASS')
packageDescription('plyr')
install.packages('tidyverse')
packageDescription('tidyverse')
packageDescription('scales')
packageDescription('stats')
packageDescription('tibble')
packageDescription('lazyeval')
require(tidyeval)
packageDescription('tidyeval')
setwd('c:/home/git/Other/miktex-pkgs/')
setwd('c:/home/git/Other/')
setwd('c:/home/git/Other/miktex_pkgs/')
readLines('./index-full/README.TXT')
download.file(url = paste0(url, f[1]), destfile = paste0('./index-full/', f[1]))
download.file(url = paste0(url, f[2]), destfile = paste0('./index-full/', f[2]), mode = 'wb')
download.file(url = paste0(url, f[3]), destfile = paste0('./index-full/', f[3]), mode = 'wb')
f <- c(
'README.TXT',
'miktex-zzdb1-2.9.tar.lzma',
'miktex-zzdb2-2.9.tar.lzma'
)
download.file(url = paste0(url, f[1]), destfile = paste0('./index-full/', f[1]))
download.file(url = paste0(url, f[2]), destfile = paste0('./index-full/', f[2]), mode = 'wb')
download.file(url = paste0(url, f[3]), destfile = paste0('./index-full/', f[3]), mode = 'wb')
f[1]
paste0('./index-full/', f[2])
paste0('./index-full/', f[3])
paste0(url, f[3])
url
url <- 'http://mirror.unl.edu/ctan/systems/win32/miktex/tm/packages/'
download.file(url = paste0(url, f[1]), destfile = paste0('./index-full/', f[1]))
download.file(url = paste0(url, f[2]), destfile = paste0('./index-full/', f[2]), mode = 'wb')
download.file(url = paste0(url, f[3]), destfile = paste0('./index-full/', f[3]), mode = 'wb')
zz <- xzfile(paste0('./index-full/', f[2]), open = "rb")
zz
untar(zz, exdir = './index-full/zzdb1/')
